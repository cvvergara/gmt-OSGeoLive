
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    

    <title>(2) Examining DEMs using variable illumination &mdash; GMT 5.1.0 documentation</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>


    
    <link rel="stylesheet" href="../_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/searchtools.js"></script>
    <script type="text/javascript" src="../../_static/rtd-sidebar.js"></script>
    <link rel="top" title="GMT 5.1.0 documentation" href="../index.html" />
    <link rel="up" title="The GMT historical collection" href="../Gallery.html" />
    <link rel="next" title="(3) Orbiting a static map" href="anim03.html" />
    <link rel="prev" title="(1) Animation of the sine function" href="anim01.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="anim03.html" title="(3) Orbiting a static map"
             accesskey="N">next</a> </li>
        <li class="right" >
          <a href="anim01.html" title="(1) Animation of the sine function"
             accesskey="P">previous</a> </li>
  <li><a href="/projects/gmt/wiki/Documentation">Project Home</a>  &raquo;</li>
  
        <li><a href="../index.html">GMT 5.1.0 documentation</a> &raquo;</li>

          <li><a href="../Gallery.html" accesskey="U">The GMT historical collection</a> &raquo;</li>
<li class="right">
<form class="search" accept-charset="UTF-8" action="search.html" method="get">
  <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  <label for="q">
    <a class="search" href="search.html" accesskey="s" original-title="">Search:</a>
  </label>
  <input accesskey="f" class="small" id="q" name="q" size="20" type="text">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form></li>
   

      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="examining-dems-using-variable-illumination">
<span id="anim-02"></span><h1>(2) Examining DEMs using variable illumination<a class="headerlink" href="#examining-dems-using-variable-illumination" title="Permalink to this headline">¶</a></h1>
<p>Our next animation uses a gridded topography for parts of Colorado (US);
the file is distributed with the tutorial examples. Here, we want to use
<a class="reference internal" href="../grdimage.html"><em>grdimage</em></a> to generate a shaded-relief
image sequence in which we sweep the illumination azimuth around the
entire horizon. The resulting animation illustrates how changing the
illumination azimuth can bring out subtle features (or artifacts) in the
gridded data. The red arrow points in the direction of the illumination.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c">#               GMT ANIMATION 02</span>
<span class="c">#</span>
<span class="c"># Purpose:      Make web page with simple animated GIF of a DEM grid</span>
<span class="c"># GMT progs:    gmt gmtset, gmt gmtmath, gmt grdgradient, gmt makecpt, gmt grdimage gmt psxy, gmt ps2raster</span>
<span class="c"># Unix progs:   awk, mkdir, rm, mv, echo, convert, cat</span>
<span class="c"># Note:         Run with any argument to build movie; otherwise 1st frame is plotted only.</span>
<span class="c">#</span>
<span class="c"># 1. Initialization</span>
<span class="c"># 1a) Assign movie parameters</span>
<span class="nv">width</span><span class="o">=</span>3.5i
<span class="nv">height</span><span class="o">=</span>4.15i
<span class="nv">dpi</span><span class="o">=</span>72
<span class="nv">n_frames</span><span class="o">=</span>36
<span class="nv">name</span><span class="o">=</span>anim_02
<span class="nv">ps</span><span class="o">=</span>.ps
<span class="c"># 1b) setup</span>
<span class="nv">del_angle</span><span class="o">=</span><span class="sb">`</span>gmt gmtmath -Q 360  <span class="nv">DIV</span> <span class="o">=</span><span class="sb">`</span>
gmt makecpt -Crainbow -T500/4500/5000 -Z &gt; <span class="nv">$$</span>.cpt
<span class="c"># 2. Main loop</span>
mkdir -p <span class="nv">$$</span>
<span class="nv">frame</span><span class="o">=</span>0
<span class="k">while</span> <span class="o">[</span>  -lt  <span class="o">]</span>; <span class="k">do</span>
	<span class="c"># Create file name using a name_##.tif format</span>
	<span class="nv">file</span><span class="o">=</span><span class="sb">`</span>gmt_set_framename  <span class="sb">`</span>
	<span class="nv">angle</span><span class="o">=</span><span class="sb">`</span>gmt gmtmath -Q   <span class="nv">MUL</span> <span class="o">=</span><span class="sb">`</span>
	<span class="nv">dir</span><span class="o">=</span><span class="sb">`</span>gmt gmtmath -Q  180 <span class="nv">ADD</span> <span class="o">=</span><span class="sb">`</span>
	gmt grdgradient us.nc -A -Nt2 -fg -G<span class="nv">$$</span>.us_int.nc
	gmt grdimage us.nc -I<span class="nv">$$</span>.us_int.nc -JM3i -P -K -C<span class="nv">$$</span>.cpt -BWSne -B1 -X0.35i -Y0.3i <span class="se">\</span>
	--PS_MEDIA<span class="o">=</span>x --FONT_ANNOT_PRIMARY<span class="o">=</span>9p &gt; <span class="nv">$$</span>.ps
	gmt psxy -Rus.nc -J -O -K -Sc0.8i -Gwhite -Wthin &gt;&gt; <span class="nv">$$</span>.ps <span class="o">&lt;&lt;&lt;</span> <span class="s2">&quot;256.25 35.6&quot;</span>
	gmt psxy -Rus.nc -J -O -Sv0.1i+e -Gred -Wthick &gt;&gt; <span class="nv">$$</span>.ps <span class="o">&lt;&lt;&lt;</span> <span class="s2">&quot;256.25 35.6  0.37&quot;</span>
	<span class="k">if</span> <span class="o">[</span> <span class="nv">$# </span>-eq 0 <span class="o">]</span>; <span class="k">then</span>
<span class="k">		</span>mv <span class="nv">$$</span>.ps 
		gmt_cleanup .gmt
		gmt_abort <span class="s2">&quot;: First frame plotted to .ps&quot;</span>
	<span class="k">fi</span>
<span class="c">#	RIP to TIFF at specified dpi</span>
	gmt ps2raster -E -Tt <span class="nv">$$</span>.ps
	mv -f <span class="nv">$$</span>.tif <span class="nv">$$</span>/.tif
	<span class="nb">echo</span> <span class="s2">&quot;Frame  completed&quot;</span>
	<span class="nv">frame</span><span class="o">=</span><span class="sb">`</span>gmt_set_framenext <span class="sb">`</span>
<span class="k">done</span>
<span class="c"># 3. Create animated GIF file and HTML for web page</span>
convert -delay 10 -loop 0 <span class="nv">$$</span>/*.tif .gif
cat <span class="s">&lt;&lt; END &gt; .html</span>
<span class="s">&lt;HTML&gt;</span>
<span class="s">&lt;TITLE&gt;GMT shading: A tool for feature detection&lt;/TITLE&gt;</span>
<span class="s">&lt;BODY bgcolor=&quot;#ffffff&quot;&gt;</span>
<span class="s">&lt;CENTER&gt;</span>
<span class="s">&lt;H1&gt;GMT shading: A tool for feature detection&lt;/H1&gt;</span>
<span class="s">&lt;IMG src=&quot;.gif&quot;&gt;</span>
<span class="s">&lt;/CENTER&gt;</span>
<span class="s">&lt;HR&gt;</span>
<span class="s">We make illuminated images of topography from a section of Colorado and</span>
<span class="s">vary the azimuth of the illumination (see arrow).  As the light-source sweeps around</span>
<span class="s">the area over 360 degrees we notice that different features in the data</span>
<span class="s">become hightlighted.  This is because the illumination is based on data</span>
<span class="s">gradients and such derivatives will high-light short-wavelength signal.</span>
<span class="s">Again, our animation uses Imagemagick&#39;s convert tool to make an animated GIF file</span>
<span class="s">with a 0.1 second pause between the 36 frames.</span>
<span class="s">&lt;HR&gt;</span>
<span class="s">&lt;I&gt;.sh: Created by  on `date`&lt;/I&gt;</span>
<span class="s">&lt;/BODY&gt;</span>
<span class="s">&lt;/HTML&gt;</span>
<span class="s">END</span>
<span class="c"># 4. Clean up temporary files</span>
gmt_cleanup .gmt
</pre></div>
</div>
<p>As you can see, these sorts of animations are not terribly difficult to
put together, especially since our vantage point is fixed. In the next
example we will move the &#8220;camera&#8221; around and must therefore deal with
how to frame perspective views.</p>
<div class="figure align-center">
<img alt="../_images/anim_02.png" src="../_images/anim_02.png" style="width: 400px;" />
<p class="caption">Animation of a DEM using variable illumination.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="anim01.html"
                        title="previous chapter">(1) Animation of the sine function</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="anim03.html"
                        title="next chapter">(3) Orbiting a static map</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="anim03.html" title="(3) Orbiting a static map"
             >next</a> </li>
        <li class="right" >
          <a href="anim01.html" title="(1) Animation of the sine function"
             >previous</a> </li>
  <li><a href="/projects/gmt/wiki/Documentation">Project Home</a>  &raquo;</li>
  
        <li><a href="../index.html">GMT 5.1.0 documentation</a> &raquo;</li>

          <li><a href="../Gallery.html" >The GMT historical collection</a> &raquo;</li>
<li class="right">
<form class="search" accept-charset="UTF-8" action="search.html" method="get">
  <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  <label for="q">
    <a class="search" href="search.html" accesskey="s" original-title="">Search:</a>
  </label>
  <input accesskey="f" class="small" id="q" name="q" size="20" type="text">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form></li>
   

      </ul>
    </div>
<div class="footer">
    &copy; Copyright 2013, P. Wessel, W. H. F. Smith, R. Scharroo, J. Luis, and F. Wobbe.
  Last updated on Nov 05, 2013.
  Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
  <br />Theme based on <a href="http://readthedocs.org/">Read The Docs</a>

</div>


  </body>
</html>