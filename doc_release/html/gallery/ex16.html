<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    

    <title>(16) Gridding of data, continued &mdash; GMT 5.1.1 documentation</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>


    
    <link rel="stylesheet" href="../_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/searchtools.js"></script>
    <script type="text/javascript" src="../../_static/rtd-sidebar.js"></script>
    <link rel="top" title="GMT 5.1.1 documentation" href="../index.html" />
    <link rel="up" title="The GMT historical collection" href="../Gallery.html" />
    <link rel="next" title="(17) Images clipped by coastlines" href="ex17.html" />
    <link rel="prev" title="(15) Gridding, contouring, and masking of unconstrained areas" href="ex15.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ex17.html" title="(17) Images clipped by coastlines"
             accesskey="N">next</a> </li>
        <li class="right" >
          <a href="ex15.html" title="(15) Gridding, contouring, and masking of unconstrained areas"
             accesskey="P">previous</a> </li>
  <li><a href="/projects/gmt/wiki/Documentation">Project Home</a>  &raquo;</li>
  
        <li><a href="../index.html">GMT 5.1.1 documentation</a> &raquo;</li>

          <li><a href="../Gallery.html" accesskey="U">The GMT historical collection</a> &raquo;</li>
<li class="right">
<form class="search" accept-charset="UTF-8" action="search.html" method="get">
  <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  <label for="q">
    <a class="search" href="search.html" accesskey="s" original-title="">Search:</a>
  </label>
  <input accesskey="f" class="small" id="q" name="q" size="20" type="text">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form></li>
   

      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="gridding-of-data-continued">
<span id="example-16"></span><h1>(16) Gridding of data, continued<a class="headerlink" href="#gridding-of-data-continued" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../pscontour.html"><em>pscontour</em></a> (for contouring) and
<a class="reference internal" href="../triangulate.html"><em>triangulate</em></a> (for gridding) use the
simplest method of interpolating data: a Delaunay triangulation (see
Section [sec:example<sub>1</sub>2]) which forms <em>z(x, y)</em> as a
union of planar triangular facets. One advantage of this method is that
it will not extrapolate <em>z(x, y)</em> beyond the convex hull of the
input (<em>x, y</em>) data. Another is that it will not estimate a <em>z</em> value
above or below the local bounds on any triangle. A disadvantage is that
the <em>z(x, y)</em> surface is not differentiable, but has sharp kinks
at triangle edges and thus also along contours. This may not look
physically reasonable, but it can be filtered later (last panel below).
<a class="reference internal" href="../surface.html"><em>surface</em></a> can be used to generate a
higher-order (smooth and differentiable) interpolation of
<em>z(x, y)</em> onto a grid, after which the grid may be illustrated
(<a class="reference internal" href="../grdcontour.html"><em>grdcontour</em></a>, <a class="reference internal" href="../grdimage.html"><em>grdimage</em></a>,
<a class="reference internal" href="../grdview.html"><em>grdview</em></a>).
<a class="reference internal" href="../surface.html"><em>surface</em></a> will interpolate to all (<em>x,
y</em>) points in a rectangular region, and thus will extrapolate beyond the
convex hull of the data. However, this can be masked out in various ways
(see Section [sec:example<sub>1</sub>5]).</p>
<p>A more serious objection is that <a class="reference internal" href="../surface.html"><em>surface</em></a> may estimate <em>z</em> values
outside the local range of the data (note area near <em>x</em> = 0.8, <em>y</em> =
5.3). This commonly happens when the default tension value of zero is
used to create a &#8220;minimum curvature&#8221; (most smooth) interpolant.
<a class="reference internal" href="../surface.html"><em>surface</em></a> can be used with non-zero
tension to partially overcome this problem. The limiting value
<em>tension = 1</em> should approximate the triangulation, while a value
between 0 and 1 may yield a good compromise between the above two cases.
A value of 0.5 is shown here (Figure [fig:example:sub:<cite>1</cite>6]). A side
effect of the tension is that it tends to make the contours turn near
the edges of the domain so that they approach the edge from a
perpendicular direction. A solution is to use
<a class="reference internal" href="../surface.html"><em>surface</em></a> in a larger area and then use
<a class="reference internal" href="../grdcut.html"><em>grdcut</em></a> to cut out the desired smaller
area. Another way to achieve a compromise is to interpolate the data to
a grid and then filter the grid using <a class="reference internal" href="../grdfft.html"><em>grdfft</em></a> or
<a class="reference internal" href="../grdfilter.html"><em>grdfilter</em></a>. The latter can handle
grids containing &#8220;NaN&#8221; values and it can do median and mode filters as
well as convolutions. Shown here is <a class="reference internal" href="../triangulate.html"><em>triangulate</em></a> followed by
<a class="reference internal" href="../grdfilter.html"><em>grdfilter</em></a>. Note that the filter has
done some extrapolation beyond the convex hull of the original <em>x, y</em>
values. The &#8220;best&#8221; smooth approximation of <em>z(x, y)</em> depends on
the errors in the data and the physical laws obeyed by <em>z</em>. GMT cannot
always do the &#8220;best&#8221; thing but it offers great flexibility through its
combinations of tools. We illustrate all four solutions using a CPT file
that contains color fills, predefined patterns for interval (900,925)
and NaN, an image pattern for interval (875,900), and a &#8220;skip slice&#8221;
request for interval (700,725).</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c">#		GMT EXAMPLE 16</span>
<span class="c">#</span>
<span class="c"># Purpose:	Illustrates interpolation methods using same data as Example 12.</span>
<span class="c"># GMT progs:	gmtset, grdview, grdfilter, pscontour, psscale, pstext, surface, triangulate</span>
<span class="c"># Unix progs:	echo, rm</span>
<span class="c">#</span>
<span class="c"># Illustrate various means of contouring, using triangulate and surface.</span>
<span class="c">#</span>
<span class="nv">ps</span><span class="o">=</span>example_16.ps
gmt gmtset FONT_ANNOT_PRIMARY 9p
<span class="c">#</span>
gmt pscontour -R0/6.5/-0.2/6.5 -Jx0.45i -P -K -Y5.5i -Ba2f1 -BWSne table_5.11 -Cex16.cpt -I &gt; <span class="nv">$ps</span>
<span class="nb">echo</span> <span class="s2">&quot;3.25 7 pscontour (triangulate)&quot;</span> | gmt pstext -R -J -O -K -N -F+f18p,Times-Roman+jCB &gt;&gt; <span class="nv">$ps</span>
<span class="c">#</span>
gmt surface table_5.11 -R -I0.2 -Graws0.nc
gmt grdview raws0.nc -R -J -B -Cex16.cpt -Qs -O -K -X3.5i &gt;&gt; <span class="nv">$ps</span>
<span class="nb">echo</span> <span class="s2">&quot;3.25 7 surface (tension = 0)&quot;</span> | gmt pstext -R -J -O -K -N -F+f18p,Times-Roman+jCB &gt;&gt; <span class="nv">$ps</span>
<span class="c">#</span>
gmt surface table_5.11 -R -I0.2 -Graws5.nc -T0.5
gmt grdview raws5.nc -R -J -B -Cex16.cpt -Qs -O -K -Y-3.75i -X-3.5i &gt;&gt; <span class="nv">$ps</span>
<span class="nb">echo</span> <span class="s2">&quot;3.25 7 surface (tension = 0.5)&quot;</span> | gmt pstext -R -J -O -K -N -F+f18p,Times-Roman+jCB &gt;&gt; <span class="nv">$ps</span>
<span class="c">#</span>
gmt triangulate table_5.11 -Grawt.nc -R -I0.2 &gt; /dev/null
gmt grdfilter rawt.nc -Gfiltered.nc -D0 -Fc1
gmt grdview filtered.nc -R -J -B -Cex16.cpt -Qs -O -K -X3.5i &gt;&gt; <span class="nv">$ps</span>
<span class="nb">echo</span> <span class="s2">&quot;3.25 7 triangulate @~\256@~ grdfilter&quot;</span> | gmt pstext -R -J -O -K -N <span class="se">\</span>
	-F+f18p,Times-Roman+jCB &gt;&gt; <span class="nv">$ps</span>
<span class="nb">echo</span> <span class="s2">&quot;3.2125 7.5 Gridding of Data&quot;</span> | gmt pstext -R0/10/0/10 -Jx1i -O -K -N <span class="se">\</span>
	-F+f32p,Times-Roman+jCB -X-3.5i &gt;&gt; <span class="nv">$ps</span>
gmt psscale -D3.25i/0.35i/5i/0.25ih -Cex16.cpt -O -Y-0.75i &gt;&gt; <span class="nv">$ps</span>
<span class="c">#</span>
rm -f *.nc gmt.conf
</pre></div>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/example_16.png"><img alt="../_images/example_16.png" src="../_images/example_16.png" style="width: 500px;" /></a>
<p class="caption">More ways to grid data.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="ex15.html"
                        title="previous chapter">(15) Gridding, contouring, and masking of unconstrained areas</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ex17.html"
                        title="next chapter">(17) Images clipped by coastlines</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/gallery/ex16.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ex17.html" title="(17) Images clipped by coastlines"
             >next</a> </li>
        <li class="right" >
          <a href="ex15.html" title="(15) Gridding, contouring, and masking of unconstrained areas"
             >previous</a> </li>
  <li><a href="/projects/gmt/wiki/Documentation">Project Home</a>  &raquo;</li>
  
        <li><a href="../index.html">GMT 5.1.1 documentation</a> &raquo;</li>

          <li><a href="../Gallery.html" >The GMT historical collection</a> &raquo;</li>
<li class="right">
<form class="search" accept-charset="UTF-8" action="search.html" method="get">
  <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  <label for="q">
    <a class="search" href="search.html" accesskey="s" original-title="">Search:</a>
  </label>
  <input accesskey="f" class="small" id="q" name="q" size="20" type="text">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form></li>
   

      </ul>
    </div>
<div class="footer">
    &copy; Copyright 2014, P. Wessel, W. H. F. Smith, R. Scharroo, J. Luis, and F. Wobbe.
  Last updated on Mar 01, 2014.
  Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.
  <br />Theme based on <a href="http://readthedocs.org/">Read The Docs</a>

</div>


  </body>
</html>