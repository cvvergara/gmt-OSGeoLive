<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    

    <title>(5) A 3-D illuminated surface (in bw) &mdash; GMT 5.1.1 documentation</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>


    
    <link rel="stylesheet" href="../_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/searchtools.js"></script>
    <script type="text/javascript" src="../../_static/rtd-sidebar.js"></script>
    <link rel="top" title="GMT 5.1.1 documentation" href="../index.html" />
    <link rel="up" title="The GMT historical collection" href="../Gallery.html" />
    <link rel="next" title="(6) Plotting of histograms" href="ex06.html" />
    <link rel="prev" title="(4) A 3-D perspective mesh plot" href="ex04.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ex06.html" title="(6) Plotting of histograms"
             accesskey="N">next</a> </li>
        <li class="right" >
          <a href="ex04.html" title="(4) A 3-D perspective mesh plot"
             accesskey="P">previous</a> </li>
  <li><a href="/projects/gmt/wiki/Documentation">Project Home</a>  &raquo;</li>
  
        <li><a href="../index.html">GMT 5.1.1 documentation</a> &raquo;</li>

          <li><a href="../Gallery.html" accesskey="U">The GMT historical collection</a> &raquo;</li>
<li class="right">
<form class="search" accept-charset="UTF-8" action="search.html" method="get">
  <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  <label for="q">
    <a class="search" href="search.html" accesskey="s" original-title="">Search:</a>
  </label>
  <input accesskey="f" class="small" id="q" name="q" size="20" type="text">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form></li>
   

      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="a-3-d-illuminated-surface-in-bw">
<span id="example-05"></span><h1>(5) A 3-D illuminated surface (in bw)<a class="headerlink" href="#a-3-d-illuminated-surface-in-bw" title="Permalink to this headline">¶</a></h1>
<p>Instead of a mesh plot we may choose to show 3-D surfaces using
artificial illumination. For this example we will use
<a class="reference internal" href="../grdmath.html"><em>grdmath</em></a> to make a grid file that
contains the surface given by the function
<img class="math" src="../_images/math/c53a18c6d4f4b9e4ffcdcb4334fddc185bed5606.png" alt="z(x, y) = \cos (2\pi r/8)\cdot e^{-r/10}"/>, where
<img class="math" src="../_images/math/0bb1e43191efcfe04a430d80616fa31c38a9ca40.png" alt="r^2 = (x^2 + y^2)"/>. The illumination is obtained by passing two
grid files to <a class="reference internal" href="../grdview.html"><em>grdview</em></a>: One with the
<em>z</em>-values (the surface) and another with intensity values (which should
be in the 1 range). We use
<a class="reference internal" href="../grdgradient.html"><em>grdgradient</em></a> to compute the
horizontal gradients in the direction of the artificial light source.
The <tt class="docutils literal"><span class="pre">gray.cpt</span></tt> file only has one line that states that all <em>z</em> values should have
the gray level 128. Thus, variations in shade are entirely due to
variations in gradients, or illuminations. We choose to illuminate from
the SW and view the surface from SE:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c">#		GMT EXAMPLE 05</span>
<span class="c">#</span>
<span class="c"># Purpose:	Generate grid and show monochrome 3-D perspective</span>
<span class="c"># GMT progs:	grdgradient, grdmath, grdview, pstext</span>
<span class="c"># Unix progs:	echo, rm</span>
<span class="c">#</span>
<span class="nv">ps</span><span class="o">=</span>example_05.ps
gmt grdmath -R-15/15/-15/15 -I0.3 X Y HYPOT DUP 2 MUL PI MUL 8 DIV COS EXCH NEG 10 DIV <span class="se">\</span>
	EXP <span class="nv">MUL</span> <span class="o">=</span> sombrero.nc
<span class="nb">echo</span> <span class="s1">&#39;-5 128 5 128&#39;</span> &gt; gray.cpt
gmt grdgradient sombrero.nc -A225 -Gintensity.nc -Nt0.75
gmt grdview sombrero.nc -JX6i -JZ2i -B5 -Bz0.5 -BSEwnZ -N-1+gwhite -Qs -Iintensity.nc -X1.5i <span class="se">\</span>
	-Cgray.cpt -R-15/15/-15/15/-1/1 -K -p120/30 &gt; <span class="nv">$ps</span>
<span class="nb">echo</span> <span class="s2">&quot;4.1 5.5 z(r) = cos (2@~p@~r/8) @~\327@~e@+-r/10@+&quot;</span> | gmt pstext -R0/11/0/8.5 -Jx1i <span class="se">\</span>
	-F+f50p,ZapfChancery-MediumItalic+jBC -O &gt;&gt; <span class="nv">$ps</span>
rm -f gray.cpt sombrero.nc intensity.nc
</pre></div>
</div>
<p>The variations in intensity could be made more dramatic by using
<a class="reference internal" href="../grdmath.html"><em>grdmath</em></a> to scale the intensity file
before running <a class="reference internal" href="../grdview.html"><em>grdview</em></a>. For very rough
data sets one may improve the smoothness of the intensities by passing
the output of <a class="reference internal" href="../grdgradient.html"><em>grdgradient</em></a> to
<a class="reference internal" href="../grdhisteq.html"><em>grdhisteq</em></a>. The shell-script above
will result in a plot like the one in Figure.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/example_05.png"><img alt="../_images/example_05.png" src="../_images/example_05.png" style="width: 500px;" /></a>
<p class="caption">3-D illuminated surface.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="ex04.html"
                        title="previous chapter">(4) A 3-D perspective mesh plot</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ex06.html"
                        title="next chapter">(6) Plotting of histograms</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/gallery/ex05.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ex06.html" title="(6) Plotting of histograms"
             >next</a> </li>
        <li class="right" >
          <a href="ex04.html" title="(4) A 3-D perspective mesh plot"
             >previous</a> </li>
  <li><a href="/projects/gmt/wiki/Documentation">Project Home</a>  &raquo;</li>
  
        <li><a href="../index.html">GMT 5.1.1 documentation</a> &raquo;</li>

          <li><a href="../Gallery.html" >The GMT historical collection</a> &raquo;</li>
<li class="right">
<form class="search" accept-charset="UTF-8" action="search.html" method="get">
  <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
  <label for="q">
    <a class="search" href="search.html" accesskey="s" original-title="">Search:</a>
  </label>
  <input accesskey="f" class="small" id="q" name="q" size="20" type="text">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form></li>
   

      </ul>
    </div>
<div class="footer">
    &copy; Copyright 2014, P. Wessel, W. H. F. Smith, R. Scharroo, J. Luis, and F. Wobbe.
  Last updated on Mar 01, 2014.
  Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.
  <br />Theme based on <a href="http://readthedocs.org/">Read The Docs</a>

</div>


  </body>
</html>